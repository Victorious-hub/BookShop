{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    {% load bootstrap5 %}
   {% bootstrap_css %}
   {% bootstrap_javascript %}
</head>
<style type="text/css">
    .card{
        background-color:black;
        color:white;
    }
    .card-header{height:60px;}
    .logout_ref{
        position:absolute;
        text-decoration:none;
        margin-top:-40px;
        margin-left:1400px;
        color:white;
    }
    .size{width:200px; margin-top:-40px;
        margin-left:1100px; height:30px;}
    .size1{
        margin-top:-40px;
    }
    .add_book_ref{
        position:absolute;
        text-decoration:none;
        margin-top:-40px;
        margin-left:950px;
        color:white;
    }
    a{text-decoration:none;}
    .login_ref{
         position:absolute;
        text-decoration:none;
        margin-top:-40px;
        margin-left:1400px;
        color:white;
    }
    .register_ref{
         position:absolute;
        text-decoration:none;
        margin-top:-40px;
        margin-left:1450px;
        color:white;
    }
    .cart_ref{
        position:absolute;
        text-decoration:none;
        margin-top:-40px;
        margin-left:880px;
        color:white;
    }
</style>
<body>
<section><div class="card">
  <div class="card-header">
      <h2>SmartBook</h2>
      {% if request.user.is_authenticated and user.is_admin%}
      <a href="{% url 'add_book' %}" class = "add_book_ref">Add book</a>
      {% endif %}
  {% if request.user.is_authenticated and not user.is_admin%}
      <a href="{% url 'edit_profile' request.user.id%}" class = "add_book_ref">Change profile</a>
      <a href="{% url 'cart'%}" class = "cart_ref">Cart</a>
      {% endif %}
  {% if request.user.is_authenticated or user.is_admin%}
      <a href="{% url 'logout' %}" class = "logout_ref">Logout</a>
  {% endif %}
  {% if not request.user.is_authenticated and not user.is_admin%}
      <a href="{% url 'login' %}" class = "login_ref">Login</a>
       <a href="{% url 'register' %}" class = "register_ref">Register</a>
  {% endif %}
       <form class="d-flex" method="POST" action="{% url 'book_search' %}">
      {% csrf_token %}
        <input class="form-control me-2 size" type="search" placeholder="Book Search" aria-label="Search" name="searched">
        <button class="btn btn-outline-secondary size1" type="submit">Search</button>
    </form>
  </div>
</div>

</section>
<br>
<div class="productContainer">
	{% for book in books_page %}

        {% if book.book_image %}

        <img src="{{ book.book_image.url }}" align="left" style="height:280px; width:210px"/>

        {% endif %}

		<h1 class="card-title">{{ book.book_name }}</h1>
		<h2>{{ book.book_author}}</h2>
		<p class="card-text">{{ book.desc }}</p>
        <p class="card-text">{{ book.genre }}</p>

		{% if request.user.is_authenticated and user.is_admin%}
		<p>
			<a href="{% url 'book_edit' book.id %}" class="btn btn-warning">Edit</a>
            <a href="{% url 'book_delete' book.id%}" class="btn btn-danger">Delete</a>
            </p>
         {% endif %}
        {% if request.user.is_authenticated and not user.is_admin%}

		<p>
			<button class="btn btn-success" value="{{ book.id }}">Add to cart</button>
            </p>
            <a href="{% url 'cart' %}" style="color:white; text-decoration:none">
                 <div class="cart-container">
                    <div class="cartitems"><p id="num_of_items">{{cart.num_of_items}}</p></div>
                    <i class="fa-solid fa-cart-shopping"></i>
                </div>
            </a>
         {% endif %}
	{% endfor %}
</div>
</header>
<br/>
 <!--{{ books_page }}<br/>
Has previous: {{ books_page.has_previous }}
<br/>
Has next: {{ books_page.has_next }}
<br/>
Current page: {{ books_page.number }}
<br/>
Page numbers: {{ books_page.paginator.num_pages }}
<br/>-->
<hr>
{% if books_page.has_previous %}
    <a href="?page=1">&laquo First</a>
    <a href="?page={{ books_page.previous_page_number }}">Previous</a>
{% endif %}

Page {{ books_page.number }} or {{ books_page.paginator.num_pages }}

{% if books_page.has_next %}
    <a href="?page={{ books_page.next_page_number }}">Next</a>
    <a href="?page={{ books_page.paginator.num_pages}}">Last &raquo</a>
{% endif %}
<script src="{% static 'js/script.js' %}"></script>
</body>
</html>